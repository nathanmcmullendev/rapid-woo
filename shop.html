<!doctype html>
<html lang="en">
<head>
    
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JHE179GXX5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JHE179GXX5');
</script>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="./favicon.ico" sizes="any">
<link rel="icon" type="image/png" sizes="32x32" href="./favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="./favicon-16x16.png">
<link rel="apple-touch-icon" href="./apple-touch-icon.png">
<link rel="manifest" href="./site.webmanifest">
<meta name="theme-color" content="#0f172a">

  <title>Shop ‚Ä¢ RapidWoo</title>

  <!-- Styles (relative paths) -->
  <link rel="stylesheet" href="assets/css/main.css" />
  <link rel="stylesheet" href="assets/css/components.css" />

  <!-- Snipcart (v3.4.1) -->
  <script src="https://cdn.snipcart.com/themes/v3.4.1/default/snipcart.js"></script>
  <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.4.1/default/snipcart.css" />

  <!-- Core scripts (data + helpers; keep order) -->
  <script src="assets/js/config.js"></script>
  <script src="assets/js/storage.js"></script>
  <script src="assets/js/utils.js"></script>

  <style>
    /* Layout + main content */
    .wrap { max-width: 1200px; margin: 0 auto; padding: 24px; }
    
    /* Shop Toolbar (mockup controls) */
    .shop-toolbar { 
      border-bottom: 1px solid #e5e7eb; 
      background: #fff; 
      padding: 14px 0;
      margin-bottom: 24px;
    }
    .shop-toolbar-inner { 
      max-width: 1200px; 
      margin: 0 auto; 
      padding: 0 24px; 
      display: flex; 
      align-items: center; 
      justify-content: space-between; 
      gap: 12px; 
    }
    .shop-nav-left { 
      display: flex; 
      align-items: center; 
      gap: 14px; 
    }
    .shop-nav-right { 
      display: flex; 
      align-items: center; 
      gap: 14px; 
    }
    
    .crumbs { 
      display: flex; 
      gap: 12px; 
      align-items: center; 
      color: #6b7280; 
      font-size: 14px; 
      margin-bottom: 18px;
    }
    .crumbs a { color: #6b7280; text-decoration: none; }

    /* Toolbar + grid */
    .toolbar { 
      display: flex; 
      flex-wrap: wrap; 
      gap: 12px; 
      align-items: center; 
      justify-content: space-between; 
      margin: 14px 0 18px; 
    }
    .tools { display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
    .tools input[type="search"], 
    .tools select { 
      padding: 10px 12px; 
      border: 1px solid #dcdfe6; 
      border-radius: 10px; 
    }
    .tools input[type="search"] { min-width: 260px; }
    .count { color: #6b7280; font-size: 14px; }

    .grid { 
      display: grid; 
      grid-template-columns: repeat(4, minmax(0,1fr)); 
      gap: 16px; 
    }
    @media (max-width: 1100px) { .grid { grid-template-columns: repeat(3, minmax(0,1fr)); } }
    @media (max-width: 780px) { .grid { grid-template-columns: repeat(2, minmax(0,1fr)); } }
    @media (max-width: 520px) { 
      .grid { grid-template-columns: 1fr; }
      .tools { width: 100%; }
      .tools input[type="search"] { width: 100%; min-width: 0; }
    }

    .empty, .loading {
      background: #f6f7f7; 
      border: 1px solid #e5e7eb; 
      border-radius: 12px; 
      padding: 28px; 
      text-align: center;
    }

    /* Product Cards */
    .product-card {
      display: block; 
      background: #fff; 
      border: 1px solid #e5e7eb; 
      border-radius: 14px; 
      overflow: hidden;
      text-decoration: none; 
      color: inherit; 
      transition: box-shadow .2s ease;
    }
    .product-card:hover { box-shadow: 0 10px 24px rgba(0,0,0,.06); }

    .product-image-wrap { 
      position: relative; 
      aspect-ratio: 1/1; 
      background: #f7f7f8; 
      overflow: hidden; 
    }
    .product-image {
      position: absolute; 
      inset: 0; 
      width: 100%; 
      height: 100% !important; 
      object-fit: cover; 
      object-position: center; 
      display: block;
    }

    .product-badge { 
      position: absolute; 
	  width: 50px;
      top: 10px; 
      left: 10px; 
      background: #d63638; 
      color: #fff; 
      padding: 4px 8px; 
      border-radius: 999px; 
      font-size: 12px; 
      font-weight: 700; 
    }
    .product-badge.featured { background: #2271b1; }

    .product-info { 
      padding: 12px; 
      display: flex; 
      flex-direction: column; 
      gap: 8px; 
    }
    .product-categories { font-size: 12px; color: #6b7280; }
    .product-title { font-size: 16px; line-height: 1.25; color: #1f2937; }
    .product-description { font-size: 13px; color: #6b7280; min-height: 38px; }
    .product-footer { 
      display: flex; 
      align-items: center; 
      justify-content: space-between; 
      gap: 10px; 
      margin-top: 6px; 
    }
    .product-price { 
      font-weight: 700; 
      display: flex; 
      gap: 8px; 
      align-items: center; 
    }
    .product-price del { color: #6b7280; font-weight: 400; }
    .stock-badge { font-size: 12px; color: #6b7280; }
    .stock-badge.instock { color: #008a20; }
    .stock-badge.outofstock { color: #d63638; }
    .add-btn { font-size: 13px; padding: 6px 12px; white-space: nowrap; }
	
	
	
	
	/* Mobile nav visibility */
@media (max-width: 860px) {
  .primary-nav { display: none; }
}

/* Mobile menu layout (match index.html) */
.mobile-menu-overlay {
  position: fixed; inset: 0; background: rgba(15,23,42,.4);
  opacity: 0; pointer-events: none; transition: opacity .2s ease;
}
.mobile-menu {
  position: fixed; top: 0; right: 0; height: 100vh; width: min(84vw, 360px);
  background: #fff; border-left: 1px solid var(--line);
  transform: translateX(100%); transition: transform .25s ease;
  display: flex; flex-direction: column; padding: 14px; box-shadow: -12px 0 32px rgba(10,17,40,.12);
}
.mobile-menu-header { display: flex; align-items: center; justify-content: space-between; padding: 6px 2px 12px; border-bottom: 1px solid var(--line); }
.mobile-menu-nav { display: flex; flex-direction: column; }
.mobile-nav-link { padding: 12px 6px; text-decoration: none; color: var(--text); border-bottom: 1px solid #f2f4f7; }

/* Open state */
.menu-open .mobile-menu-overlay { opacity: 1; pointer-events: auto; }
.menu-open .mobile-menu { transform: translateX(0); }







/* Footer */
.site-footer { 
  background: #fff; 
  border-top: 1px solid var(--line); 
  padding: 40px 0; 
  color: var(--muted); 
}
.footer-grid { 
  display: grid; 
  grid-template-columns: 1fr auto; 
  align-items: center; 
  gap: 24px; 
}
.footer-brand {
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.footer-tagline {
  font-size: 14px;
  color: var(--muted);
  margin: 0;
}
.foot-links { 
  display: flex; 
  gap: 20px; 
  flex-wrap: wrap; 
}
.foot-links a { 
  color: var(--muted); 
  text-decoration: none; 
  transition: color 0.2s;
}
.foot-links a:hover {
  color: var(--brand);
}

/* Mobile Responsive */
@media (max-width: 968px) {
  .hero-wrap {
    grid-template-columns: 1fr;
    gap: 32px;
  }

  .hero-visual {
    order: 2; /* Show text first on mobile */
  }

  .hero-content {
    padding-right: 0;
  }

  .features-grid {
    grid-template-columns: 1fr;
  }

  .steps {
    grid-template-columns: 1fr;
  }

  .footer-grid {
    grid-template-columns: 1fr;
    text-align: center;
  }

  .foot-links {
    justify-content: center;
  }
}


.tools select {
  padding: 10px 12px; 
  border: 1px solid #dcdfe6; 
  border-radius: 10px;
  min-width: 200px;
  cursor: pointer;
}
  </style>
</head>
<body>

  <!-- Snipcart configuration -->
  <div hidden id="snipcart"
       data-api-key="YTNhNTA0OWQtMjQ4NS00MTg0LWI0NjYtNTdiNTM5NmYxOTE1NjM4ODgyMjg4ODE0ODkwMzUw"
       data-config-add-product-behavior="none"
       data-config-modal-style="side"
       data-currency="usd">
  </div>
  <script>
    window.SnipcartSettings = {
      publicApiKey: "YTNhNTA0OWQtMjQ4NS00MTg0LWI0NjYtNTdiNTM5NmYxOTE1NjM4ODgyMjg4ODE0ODkwMzUw",
      loadStrategy: "on-user-interaction",
      currency: "usd"
    };
  </script>

  <!-- Main Header (like other pages) -->
<header class="site-header">
  <div class="header-container">
    <a href="./index.html" class="site-logo" aria-label="RapidWoo Home">
      <div class="logo-icon"></div>
      <span>RapidWoo</span>
    </a>

    <nav class="primary-nav">
      <a href="./index.html" class="nav-link">Home</a>
      <a href="./shop.html" class="nav-link">Shop</a>
      <a href="./demo/index.html" class="nav-link">Editor</a>
	  <a href="./contact.html" class="nav-link">Contact</a>
    </nav>

    <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Open menu" aria-expanded="false" aria-controls="mobile-menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</header>

<!-- Mobile Menu -->
<div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>
<div class="mobile-menu" id="mobile-menu" aria-hidden="true">
  <div class="mobile-menu-header">
    <a href="./index.html" class="site-logo" aria-label="RapidWoo Home">
      <div class="logo-icon"></div>
      <span>RapidWoo</span>
    </a>
    <button class="mobile-menu-close" id="mobile-menu-close" aria-label="Close menu">‚úï</button>
  </div>
  <nav class="mobile-menu-nav">
    <a href="./index.html" class="mobile-nav-link">Home</a>
    <a href="./shop.html" class="mobile-nav-link">Shop</a>
    <a href="./demo/index.html" class="mobile-nav-link">Editor</a>
	<a href="./contact.html" class="mobile-nav-link">Contact</a>
  </nav>
</div>

  <!-- Shop Toolbar (Mockup Controls) -->
  <div class="shop-toolbar">
    <div class="shop-toolbar-inner">
      <div class="shop-nav-left">
        <strong style="font-size: 14px; color: #1f2937;">Shop Preview</strong>
      </div>
      <div class="shop-nav-right">
        <button class="snipcart-checkout button">
          üõí <span class="snipcart-items-count">0</span>
        </button>
      </div>
    </div>
  </div>

  <main class="wrap">
    <!-- Breadcrumbs -->
    <div class="crumbs">
      <a href="index.html">Home</a> <span>‚Ä∫</span> <span>Shop</span>
    </div>

    <!-- LOADING -->
    <section id="loading-state" class="loading" style="display:block">
      <h2 style="font-size:18px; margin-bottom:6px;">Loading products‚Ä¶</h2>
      <p class="muted">Please wait.</p>
    </section>

    <!-- EMPTY -->
    <section id="empty-state" class="empty" style="display:none">
      <h2 style="font-size:18px; margin-bottom:6px;">No products found</h2>
      <p class="muted">Try adjusting your search or check back later.</p>
      <div style="margin-top:12px;">
        <button id="clear-search" class="button">Clear search</button>
      </div>
    </section>

    <!-- CONTENT -->
    <section id="shop-content" style="display:none">
      <div class="toolbar">
        <h1 style="font-size:28px; font-weight:800; margin:0;">Shop</h1>
        <div class="tools">
  <select id="category-filter">
    <option value="">All Categories</option>
  </select>
  <select id="sort">
    <option value="newest">Sort: Newest</option>
    <option value="price-asc">Price: Low ‚Üí High</option>
    <option value="price-desc">Price: High ‚Üí Low</option>
    <option value="title-asc">Title: A ‚Üí Z</option>
    <option value="title-desc">Title: Z ‚Üí A</option>
  </select>
  <span class="count" id="product-count">0 products</span>
</div>
      </div>

      <div id="products-grid" class="grid"></div>
    </section>
  </main>

  <!-- Hidden validation products -->
  <div id="validation-products" style="display:none;"></div>

  <!-- Mobile menu script -->
  <script>
  (function () {
    const body = document.body;
    const toggle = document.getElementById('mobile-menu-toggle');
    const overlay = document.getElementById('mobile-menu-overlay');
    const menu = document.getElementById('mobile-menu');
    const closeBtn = document.getElementById('mobile-menu-close');

    function openMenu() {
      body.classList.add('menu-open');
      toggle?.setAttribute('aria-expanded', 'true');
      body.style.overflow = 'hidden';
    }
    
    function closeMenu() {
      body.classList.remove('menu-open');
      toggle?.setAttribute('aria-expanded', 'false');
      body.style.overflow = '';
    }

    toggle?.addEventListener('click', () => {
      body.classList.contains('menu-open') ? closeMenu() : openMenu();
    });
    
    overlay?.addEventListener('click', closeMenu);
    closeBtn?.addEventListener('click', closeMenu);
    
    window.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && body.classList.contains('menu-open')) closeMenu();
    });
  })();
  </script>

<!-- Shop functionality script -->
  <script>
(function () {
  const Utils = window.RapidWoo?.Utils || {
    q: (s, r=document) => r.querySelector(s),
    qa: (s, r=document) => Array.from(r.querySelectorAll(s)),
  };
  const Storage = window.RapidWoo?.Storage;

  const el = {
    loading: Utils.q('#loading-state'),
    empty: Utils.q('#empty-state'),
    content: Utils.q('#shop-content'),
    grid: Utils.q('#products-grid'),
    count: Utils.q('#product-count'),
    categoryFilter: Utils.q('#category-filter'),
    sort: Utils.q('#sort'),
    clear: Utils.q('#clear-search'),
    validation: Utils.q('#validation-products'),
  };

  let all = [];
  let filtered = [];
  let selectedCategory = '';
  let sort = 'newest';
  const nf = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' });

  const isHttpUrl = (u) => typeof u === 'string' && /^https?:\/\//i.test(u);
  const cleanText = (htmlish) => {
    if (!htmlish) return '';
    const div = document.createElement('div'); 
    div.innerHTML = htmlish;
    return (div.textContent || div.innerText || '').trim();
  };

  function priceOf(p) {
    const candidates = [p?.sale_price, p?.price, p?.regular_price];
    for (const v of candidates) {
      if (v === null || v === undefined) continue;
      const s = String(v).trim();
      if (!s) continue;
      const n = Number(s);
      if (Number.isFinite(n) && n > 0) return n;
    }
    return null;
  }

  function productImage(p) {
    const cand = p?.image || (p?.images && p.images[0] && (p.images[0].src || p.images[0])) || '';
    return cand || '';
  }

  function productUrl(p) {
    const slugOrId = p.slug || p.id;
    return `product.html?product=${encodeURIComponent(slugOrId)}`;
  }

  function showLoading(){ el.loading.style.display='block'; el.empty.style.display='none'; el.content.style.display='none'; }
  function showEmpty(){ el.loading.style.display='none'; el.content.style.display='none'; el.empty.style.display='block'; }
  function showContent(){ el.loading.style.display='none'; el.empty.style.display='none'; el.content.style.display='block'; }
  function setCount(n){ if (el.count) el.count.textContent = `${n} product${n===1?'':'s'}`; }

  function injectValidationProduct(p) {
    const div = document.createElement('div');
    const img = productImage(p);
    const price = priceOf(p);
    const title = (p.title || 'Untitled Product');
    const desc = cleanText(p.short_description || p.description || '');

    div.className = 'snipcart-add-item';
    div.setAttribute('data-item-id', String(p.id || p.slug || Math.random()).replace(/\s+/g,'-'));
    div.setAttribute('data-item-name', title);
    div.setAttribute('data-item-price', String(price ?? 0));
    div.setAttribute('data-item-url', productUrl(p));
    if (img && isHttpUrl(img)) div.setAttribute('data-item-image', img);
    if (desc) div.setAttribute('data-item-description', desc);

    el.validation.appendChild(div);
  }

  function createProductCard(p) {
    const card = document.createElement('div');
    card.className = 'product-card';

    const effectivePrice = priceOf(p);
    const hasSale = p.sale_price && p.regular_price &&
                    String(p.sale_price).trim() !== String(p.regular_price).trim();
    let description = cleanText(p.short_description || p.description || '');
    if (description.length > 120) description = description.slice(0, 120) + '‚Ä¶';

    const img = productImage(p);
    const stock = p.stock_status || 'instock';
    const isInStock = stock === 'instock';
    const url = productUrl(p);
    const idAttr = (p.id || p.slug || '').toString().replace(/\s+/g,'-');
    const titleAttr = (p.title || 'Product');

    card.innerHTML = `
      <a href="${url}" style="text-decoration:none;color:inherit;">
        <div class="product-image-wrap">
          ${img
            ? `<img class="product-image" src="${img}" alt="${titleAttr.replace(/"/g,'&quot;')}" loading="lazy" width="800" height="800">`
            : `<div style="font-size:64px;color:#ccc">üì¶</div>`
          }
          ${hasSale ? '<span class="product-badge">Sale</span>' : ''}
          ${p.featured && !hasSale ? '<span class="product-badge featured">‚≠ê Featured</span>' : ''}
        </div>

        <div class="product-info">
          ${p.categories?.length ? `<div class="product-categories">${p.categories[0]}</div>` : ''}
          <h2 class="product-title">${titleAttr}</h2>
          ${description ? `<p class="product-description">${description}</p>` : ''}

          <div class="product-footer">
            <div>
              <div class="product-price">
                ${hasSale ? `<del>${nf.format(Number(p.regular_price) || 0)}</del>` : ''}
                <span>${nf.format(effectivePrice ?? 0)}</span>
              </div>
              <span class="stock-badge ${stock}">
                ${stock === 'instock' ? 'In Stock' : stock === 'outofstock' ? 'Out of Stock' : 'On Backorder'}
              </span>
            </div>
            <div class="add-btn-slot"></div>
          </div>
        </div>
      </a>
    `;

    const isVariable = p && p.type === 'variable';
    if (isVariable) {
      const chooseBtn = document.createElement('button');
      chooseBtn.className = 'add-btn button button-primary';
      chooseBtn.textContent = 'Choose';
      chooseBtn.title = 'Choose options';
      chooseBtn.addEventListener('click', (e) => {
        e.preventDefault();
        window.location.href = url;
      });
      card.querySelector('.add-btn-slot').appendChild(chooseBtn);
      return card;
    } else {
      const btn = document.createElement('button');
      btn.className = 'add-btn button button-primary snipcart-add-item';
      btn.textContent = 'üõí Add';
      btn.title = isInStock ? 'Add to cart' : 'Unavailable';

      const validPrice = Number.isFinite(effectivePrice) && effectivePrice > 0;
      const validImage = !img || isHttpUrl(img);
      if (!isInStock || !validPrice) {
        btn.setAttribute('disabled', '');
      }

      btn.setAttribute('data-item-id', idAttr || Math.random().toString(36).slice(2));
      btn.setAttribute('data-item-name', titleAttr);
      if (validPrice) btn.setAttribute('data-item-price', String(effectivePrice.toFixed(2)));
      btn.setAttribute('data-item-url', url);
      if (img && validImage) btn.setAttribute('data-item-image', img);
      if (description) btn.setAttribute('data-item-description', description);

      card.querySelector('.add-btn-slot').appendChild(btn);
      return card;
    }
  }

  function populateCategories() {
    if (!el.categoryFilter) return;
    
    const categoriesSet = new Set();
    all.forEach(p => {
      if (Array.isArray(p.categories)) {
        p.categories.forEach(cat => {
          if (cat && cat.trim()) categoriesSet.add(cat.trim());
        });
      }
    });
    
    const categories = Array.from(categoriesSet).sort();
    
    el.categoryFilter.innerHTML = '<option value="">All Categories</option>';
    
    categories.forEach(cat => {
      const option = document.createElement('option');
      option.value = cat;
      option.textContent = cat;
      el.categoryFilter.appendChild(option);
    });
  }

  function applyFilters() {
    filtered = (all || []).filter(p => {
      if (selectedCategory) {
        const hasCategory = Array.isArray(p.categories) && 
                          p.categories.some(cat => cat === selectedCategory);
        if (!hasCategory) return false;
      }
      return true;
    });
    applySort();
  }

  function applySort() {
    switch (sort) {
      case 'price-asc':  filtered.sort((a,b) => (priceOf(a) ?? Infinity) - (priceOf(b) ?? Infinity)); break;
      case 'price-desc': filtered.sort((a,b) => (priceOf(b) ?? -Infinity) - (priceOf(a) ?? -Infinity)); break;
      case 'title-asc':  filtered.sort((a,b) => String(a.title||'').localeCompare(String(b.title||''))); break;
      case 'title-desc': filtered.sort((a,b) => String(b.title||'').localeCompare(String(a.title||''))); break;
      default:
        filtered.sort((a,b) => {
          const da = new Date(a.date_created || a.date || 0).getTime() || 0;
          const db = new Date(b.date_created || b.date || 0).getTime() || 0;
          return db - da;
        });
    }
    render();
  }

  function render() {
    el.grid.innerHTML = '';
    el.validation.innerHTML = '';

    if (!filtered.length) { setCount(0); showEmpty(); return; }

    setCount(filtered.length);
    filtered.forEach(p => injectValidationProduct(p));
    filtered.forEach(p => el.grid.appendChild(createProductCard(p)));
    showContent();
  }

  function attachUI() {
    el.categoryFilter?.addEventListener('change', () => { 
      selectedCategory = el.categoryFilter.value || ''; 
      applyFilters(); 
    });
    el.sort?.addEventListener('change', () => { sort = el.sort.value; applySort(); });
  }

  async function loadProducts() {
    try {
      if (!Storage?.getProducts) return [];
      const data = await Storage.getProducts();
      return (data?.products || []).filter(p => !p.hidden);
    } catch (e) {
      console.error('Error loading products', e);
      return [];
    }
  }

  async function init() {
    showLoading();
    all = await loadProducts();
    populateCategories();
    attachUI();
    applyFilters();
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }

  window.addEventListener('rapidwoo:products:updated', async () => {
    all = await loadProducts();
    populateCategories();
    applyFilters();
  });
})();
</script>
<!-- FOOTER -->
<footer class="site-footer">
  <div class="container">
    <div class="footer-grid">
      <div class="footer-brand">
        <a href="./index.html" class="site-logo" aria-label="RapidWoo Home">
          <div class="logo-icon"></div>
          <span>RapidWoo</span>
        </a>
        <p class="footer-tagline">Clean WooCommerce storefronts with a lightning-fast editor.</p>
      </div>
      <div class="foot-links">
        <a href="./index.html">Home</a>
        <a href="./shop.html">Shop</a>
        <a href="./demo/index.html">Editor</a>
        <a href="./contact.html">Contact</a>
      </div>
    </div>
  </div>
</footer>
<script>
(() => {
  const KEY = 'fpe.shop.prefs';

  function getPrefs(){
    try {
      return JSON.parse(localStorage.getItem(KEY) || 'null') || {
        title:true, price:true, description:true, stock:true, add:true
      };
    } catch {
      return { title:true, price:true, description:true, stock:true, add:true };
    }
  }

  function setDisplay(selector, show) {
    document.querySelectorAll(selector).forEach(n => { n.style.display = show ? '' : 'none'; });
  }

  function applyPrefs(){
    const p = getPrefs();

    // Titles, Prices, Descriptions (already in your cards)
    setDisplay('.shop-product-title, .product-title', p.title !== false);
    setDisplay('.shop-product-price, .product-price', p.price !== false);
    setDisplay('.shop-product-description, .product-description', p.description !== false);

    // NEW: Stock badge and Add button
    // Stock badge appears in multiple views; these cover shop cards and modals
    setDisplay('.stock-badge', p.stock !== false);

    // Add-to-cart / Choose buttons live inside this slot on shop cards
    // Hide the whole slot to keep layout clean
    setDisplay('.add-btn-slot, .snipcart-add-item, .add-btn', p.add !== false);
  }

  // Apply on DOM ready
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', applyPrefs);
  } else {
    applyPrefs();
  }

  // Re-apply whenever the grid re-renders
  const grid = document.getElementById('products-grid');
  if (grid) {
    const mo = new MutationObserver(applyPrefs);
    mo.observe(grid, { childList: true, subtree: true });
  }

  // Live update when the Editor changes settings (another tab)
  window.addEventListener('storage', (e) => {
    if (e.key === KEY) applyPrefs();
  });

  // Optional: if your shop code dispatches a render event, hook it too
  // document.addEventListener('rapidwoo:shop:rendered', applyPrefs);
})();
</script>


</body>
</html>
